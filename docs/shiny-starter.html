<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Shiny/Leaflet</title>

<script src="site_libs/header-attrs-2.7/header-attrs.js"></script>
<script src="site_libs/jquery-1.12.4/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<script src="site_libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="site_libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-sm-12 col-md-4 col-lg-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-sm-12 col-md-8 col-lg-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Introduction to Leaflet</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="index.html">1. Basic Intro</a>
    </li>
    <li>
      <a href="hospitals.html">2. Hospital Example</a>
    </li>
    <li>
      <a href="shiny-starter.html">3. Shiny (USA Water)</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mikejohnson51/leaflet-intro">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Shiny/Leaflet</h1>
<h3 class="subtitle">Building a USA water dashboard</h3>

</div>


<div id="libraries" class="section level1">
<h1>Libraries</h1>
<pre class="r"><code>library(AOI)           # Data and geocoding
library(dataRetrieval) # USGS data access

library(sf)            # all things spatial ...
library(dplyr)         # data manipulations ...

library(leaflet)       # mapping</code></pre>
</div>
<div id="data" class="section level1">
<h1>Data</h1>
<div id="county-sf-object" class="section level3">
<h3>County <code>sf</code> object</h3>
<pre class="r"><code>counties = aoi_get(state = &#39;conus&#39;, county = &quot;all&quot;) %&gt;%
  mutate(location = paste(name, state_abbr, sep = &quot;, &quot;)) %&gt;% 
  select(geoid, name, state_name, location)

glimpse(counties)</code></pre>
<pre><code>#&gt; Rows: 3,108
#&gt; Columns: 5
#&gt; $ geoid      &lt;chr&gt; &quot;39131&quot;, &quot;46003&quot;, &quot;…
#&gt; $ name       &lt;chr&gt; &quot;Pike&quot;, &quot;Aurora&quot;, &quot;…
#&gt; $ state_name &lt;chr&gt; &quot;Ohio&quot;, &quot;South Dako…
#&gt; $ location   &lt;chr&gt; &quot;Pike, OH&quot;, &quot;Aurora…
#&gt; $ geometry   &lt;MULTIPOLYGON [°]&gt; MULTIP…</code></pre>
<pre class="r"><code>plot(counties$geometry)</code></pre>
<p><img src="shiny-starter_files/figure-html/unnamed-chunk-3-1.png" width="100%" /></p>
</div>
<div id="active-usgs-gages" class="section level3">
<h3>Active USGS gages</h3>
<pre class="r"><code>sites   = readRDS(&quot;shiny/usgs_sites.rds&quot;)
glimpse(sites)</code></pre>
<pre><code>#&gt; Rows: 5,290
#&gt; Columns: 4
#&gt; $ name     &lt;chr&gt; &quot;Middlesex, MA&quot;, &quot;Ham…
#&gt; $ siteID   &lt;chr&gt; &quot;01098530&quot;, &quot;01176000…
#&gt; $ geoid    &lt;chr&gt; &quot;25017&quot;, &quot;25013&quot;, &quot;25…
#&gt; $ geometry &lt;POINT [°]&gt; POINT (-71.3974…</code></pre>
</div>
</div>
<div id="core-leaflet-functions" class="section level1">
<h1>Core Leaflet functions</h1>
<div id="auto-generate-basemap" class="section level3">
<h3>Auto generate basemap</h3>
<pre class="r"><code>basemap = function(){
  leaflet() %&gt;%
    addProviderTiles(&#39;CartoDB.Positron&#39;) %&gt;%
    setView(lat = 39, lng = -95, zoom = 3)
}</code></pre>
<div id="example" class="section level4">
<h4>Example</h4>
<pre class="r"><code>basemap()</code></pre>
<div id="htmlwidget-cb9622ce633c8502f45a" style="width:100%;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-cb9622ce633c8502f45a">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]}],"setView":[[39,-95],3,[]]},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="zoom-to-a-county-given-a-geoid" class="section level3">
<h3>Zoom to a county, given a GEOID</h3>
<pre class="r"><code>zoom_to_county = function(map, counties, FIP){

  shp    = filter(counties, geoid == FIP)
  bounds = as.vector(st_bbox(shp))

  clearGroup(map, &#39;shp&#39;) %&gt;%
    addPolygons(data = shp,
                color      = &quot;#003660&quot;,
                fillColor  = &quot;#FEBC11&quot;,
                fillOpacity = .2,
                group = &quot;shp&quot;) %&gt;%
    flyToBounds(bounds[1], bounds[2], bounds[3], bounds[4])
}</code></pre>
<div id="example-1" class="section level4">
<h4>Example</h4>
<pre class="r"><code>zoom_to_county(basemap(), counties, 25017)</code></pre>
<div id="htmlwidget-92509e50f50438673971" style="width:100%;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-92509e50f50438673971">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"clearGroup","args":["shp"]},{"method":"addPolygons","args":[[[[{"lng":[-71.8987687719366,-71.8053896027383,-71.745817,-71.636214,-71.351874,-71.294205,-71.255605,-71.2551101218106,-71.238434,-71.255749,-71.164879,-71.145942,-71.033998,-71.053365,-70.982994,-70.9825456015879,-71.080947,-71.064059,-71.077095,-71.117193,-71.167625,-71.156887,-71.191155,-71.23106,-71.269958,-71.32975,-71.302922,-71.344083,-71.478119,-71.502626,-71.555738,-71.586759,-71.549453,-71.522178,-71.506478,-71.486797,-71.551126,-71.585168,-71.624702,-71.5591,-71.53878,-71.635869,-71.678969,-71.664601,-71.775755,-71.858483,-71.8987687719366],"lat":[42.7114667208088,42.7089149435285,42.707287,42.704888,42.698154,42.69699,42.736389,42.7363970532872,42.670763,42.656929,42.598021,42.608335,42.585493,42.475925,42.423996,42.420221800052,42.382378,42.369001,42.358697,42.364229,42.360073,42.330241,42.283059,42.320736,42.328086,42.312991,42.248274,42.200979,42.156782,42.191416,42.182503,42.259545,42.266095,42.266454,42.264276,42.330189,42.326395,42.310977,42.350465,42.411943,42.54303,42.524024,42.53043,42.611598,42.64423,42.633815,42.7114667208088]}]]],null,"shp",{"interactive":true,"className":"","stroke":true,"color":"#003660","weight":5,"opacity":0.5,"fill":true,"fillColor":"#FEBC11","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[42.156782,42.7363970532872],"lng":[-71.8987687719366,-70.9825456015879]},"flyToBounds":[42.156782,-71.8987687719366,42.7363970532872,-70.9825456015879,[]]},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="usgs-functions" class="section level1">
<h1>USGS functions</h1>
<div id="wrapper-for-finding-streamflow-given-a-siteid" class="section level3">
<h3>Wrapper for finding streamflow given a siteID</h3>
<pre class="r"><code>get_streamflow = function(siteID){
  readNWISdv(siteNumbers = siteID,
             parameterCd = &#39;00060&#39;,
             startDate   = Sys.Date() - 365) %&gt;%
    renameNWISColumns()
}</code></pre>
<div id="example-2" class="section level4">
<h4>Example</h4>
<pre class="r"><code>flow = get_streamflow(&#39;01098530&#39;)
glimpse(flow)</code></pre>
<pre><code>#&gt; Rows: 365
#&gt; Columns: 5
#&gt; $ agency_cd &lt;chr&gt; &quot;USGS&quot;, &quot;USGS&quot;, &quot;USG…
#&gt; $ site_no   &lt;chr&gt; &quot;01098530&quot;, &quot;0109853…
#&gt; $ Date      &lt;date&gt; 2020-03-17, 2020-03…
#&gt; $ Flow      &lt;dbl&gt; 158, 141, 170, 202, …
#&gt; $ Flow_cd   &lt;chr&gt; &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, …</code></pre>
</div>
</div>
<div id="network-linked-data-index-function-given-a-latlon" class="section level3">
<h3><a href="https://usgs-r.github.io/dataRetrieval/articles/nldi.html">Network Linked Data Index</a> function given a lat/lon</h3>
<pre class="r"><code>find_nldi  = function(x, y){
  findNLDI(location = c(x,y), nav = c(&#39;UM&#39;), 
           find = c(&quot;basin&quot;, &quot;flowlines&quot;), distance = 1000)
}</code></pre>
<div id="example-3" class="section level4">
<h4>Example</h4>
<pre class="r"><code>nldi_out = find_nldi(-104.780837, 38.786796)

basemap() %&gt;% 
  addPolygons(data = nldi_out$basin) %&gt;% 
  addPolygons(data = nldi_out$UM_flowlines) %&gt;%
  zoom_to_county(counties, &#39;08041&#39;)</code></pre>
<div id="htmlwidget-6d5df719613b02c6bad4" style="width:100%;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-6d5df719613b02c6bad4">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPolygons","args":[[[[{"lng":[-104.930309281,-104.935200743,-104.945495671,-104.944730482,-104.951146594,-104.95285504,-104.955821122,-104.958479938,-104.98261435,-104.991186719,-104.993053334,-104.991691237,-104.993606632,-104.994432544,-105.002157614,-105.006057483,-105.013809428,-105.016595876,-105.01585636,-105.019760331,-105.02212459,-105.026844482,-105.034110806,-105.041165666,-105.042206332,-105.046152312,-105.049270043,-105.053546185,-105.055063408,-105.059561495,-105.060472886,-105.065880132,-105.065193973,-105.078166171,-105.089311464,-105.089417156,-105.085998605,-105.091987452,-105.097496268,-105.104839513,-105.108903906,-105.118021274,-105.117901435,-105.122092769,-105.119680647,-105.120382386,-105.126046285,-105.124184549,-105.119549501,-105.110580752,-105.107004466,-105.105182987,-105.105398571,-105.102482573,-105.095803964,-105.093908896,-105.084417939,-105.079066011,-105.078829619,-105.076617259,-105.080470419,-105.074698738,-105.075946011,-105.072329215,-105.066284078,-105.066643967,-105.063785165,-105.067809421,-105.066796827,-105.071699664,-105.071880587,-105.059684589,-105.056677411,-105.051859217,-105.046082751,-105.039924361,-105.033541198,-105.031105972,-105.025425354,-105.01534914,-105.014083262,-105.016731732,-105.012146984,-105.013291313,-105.011434092,-105.012270216,-105.009625878,-105.012427663,-105.011257662,-105.013358774,-105.016714061,-105.017369079,-105.021536373,-105.018473854,-105.019228502,-105.021460883,-105.02137509,-105.024134616,-105.021802248,-105.024862608,-105.027639514,-105.025910193,-105.027941817,-105.027609557,-105.020718383,-105.022342044,-105.02578735,-105.026193069,-105.019559372,-105.018801419,-105.012916133,-105.012352683,-105.00647076,-105.002638284,-104.999435153,-104.990687786,-104.987865214,-104.986317528,-104.972016847,-104.968537866,-104.959816002,-104.958607579,-104.953623732,-104.953023719,-104.94096198,-104.934059286,-104.924279521,-104.922354529,-104.915329282,-104.906543361,-104.900543118,-104.892544622,-104.888157524,-104.885594159,-104.870902921,-104.868356803,-104.861667665,-104.857420197,-104.854935155,-104.849309759,-104.840745332,-104.83493176,-104.823535328,-104.820454055,-104.811526532,-104.816245058,-104.809622755,-104.802797198,-104.802600945,-104.798354978,-104.800590946,-104.793949805,-104.777625518,-104.769224847,-104.766232492,-104.764309005,-104.757109881,-104.753248158,-104.75012011,-104.746362103,-104.740931775,-104.737331547,-104.737689621,-104.730979711,-104.731277938,-104.725775777,-104.722862249,-104.723572732,-104.720838446,-104.716621588,-104.714581032,-104.712656147,-104.708086598,-104.703822575,-104.696423321,-104.686853321,-104.681701663,-104.673255851,-104.672302931,-104.666758838,-104.668961828,-104.667651833,-104.668903772,-104.672543353,-104.672634332,-104.676320274,-104.675809184,-104.678557547,-104.67254601,-104.671325513,-104.676682874,-104.684495375,-104.688454189,-104.693090845,-104.696994632,-104.706532468,-104.706722108,-104.710476138,-104.710658505,-104.708645336,-104.710863138,-104.709413418,-104.713982326,-104.715899499,-104.718459389,-104.720999969,-104.719506583,-104.721744894,-104.726124784,-104.728868414,-104.720244304,-104.726997809,-104.726873942,-104.737522895,-104.75513133,-104.764017777,-104.768319033,-104.77010381,-104.769931413,-104.76488174,-104.762305293,-104.762724751,-104.754460612,-104.749141056,-104.748887006,-104.744378262,-104.738726855,-104.742586573,-104.745119175,-104.747401525,-104.747517512,-104.757899144,-104.759501341,-104.768022285,-104.76939048,-104.769387104,-104.772208782,-104.773604136,-104.770954026,-104.772184322,-104.77144528,-104.7784518,-104.77903594,-104.78272741,-104.786352813,-104.812615958,-104.814547675,-104.823074849,-104.832081672,-104.850445076,-104.867520961,-104.864834479,-104.867149395,-104.867899756,-104.866814328,-104.868934875,-104.867036471,-104.872856207,-104.882956746,-104.8921872,-104.894786584,-104.897918028,-104.904600226,-104.909590862,-104.911729945,-104.91727701,-104.922972469,-104.926434944,-104.930309281],"lat":[38.73805429,38.7405091800001,38.7414116960001,38.7510037430001,38.7552494060001,38.758767435,38.759892177,38.763462985,38.7649049830001,38.7728471660001,38.781276717,38.7873653660001,38.791727043,38.792542741,38.7894568740001,38.7935318680001,38.792232896,38.7933453160001,38.7966834530001,38.8060993710001,38.8193551270001,38.825128937,38.8305367570001,38.833222698,38.8390910640001,38.8410759390001,38.845544402,38.8470207080001,38.849143451,38.8498271330001,38.855281694,38.860011478,38.8629197110001,38.865731429,38.8776765710001,38.879692785,38.8819744990001,38.8835170080001,38.888509248,38.8864338590001,38.8787955070001,38.881326616,38.884573726,38.890404823,38.8941299410001,38.896772345,38.9013928690001,38.908322028,38.91549883,38.9206640840001,38.925184675,38.928869031,38.933243641,38.9367837550001,38.940922001,38.943895205,38.945257616,38.9493173340001,38.953861611,38.9564218840001,38.959545301,38.9638991890001,38.9671393290001,38.970460023,38.972811613,38.976273356,38.9781034590001,38.9817683100001,38.986595224,38.98919571,38.9922987730001,38.9953747810001,38.9975621240001,38.997761273,39.0009364690001,39.0010072690001,39.0046378480001,39.000055651,38.9985070480001,39.003689326,39.0075793010001,39.0096014310001,39.0142687210001,39.0170169400001,39.0230641160001,39.0251206030001,39.0283042250001,39.031057887,39.0319254940001,39.0370018850001,39.0384076030001,39.0455606300001,39.05094968,39.0567906850001,39.0582649520001,39.057998404,39.0602543690001,39.063007831,39.06531821,39.06767376,39.0782684810001,39.0800865,39.081631567,39.093184916,39.0976704940001,39.100724196,39.1007432650001,39.102113769,39.107328282,39.112783001,39.1158409810001,39.1195285520001,39.118874222,39.120201824,39.1267381530001,39.1263193570001,39.1279933270001,39.1261425660001,39.1246692,39.130466208,39.132530338,39.130094984,39.129568578,39.1317627760001,39.138682353,39.12787747,39.123680474,39.120537154,39.1186218510001,39.1219050490001,39.121484251,39.1237678620001,39.123648716,39.1215157980001,39.1257696870001,39.1228087490001,39.119899285,39.121120612,39.1202038850001,39.1223949270001,39.121392918,39.1168529120001,39.1129411840001,39.1062645150001,39.1038489380001,39.0906100330001,39.087607287,39.0869960150001,39.084385841,39.080304406,39.0738631130001,39.0720328940001,39.0722547830001,39.067982708,39.068044302,39.0652623620001,39.0665925110001,39.064388412,39.065018868,39.0687114250001,39.0693329740001,39.06431802,39.0603531890001,39.058403909,39.0551247820001,39.0530775400001,39.049054465,39.043792346,39.0440279330001,39.0398655280001,39.040208609,39.043250329,39.0442593880001,39.0412181180001,39.040556645,39.0356456580001,39.0366273830001,39.031293324,39.0282585840001,39.0253562510001,39.0215882410001,39.0170897080001,39.0139174130001,39.012049867,39.0069366880001,39.003361731,39.0011066210001,38.9978261580001,38.992028798,38.9866243000001,38.979651167,38.9759261230001,38.9660477,38.9594003990001,38.955429232,38.949993738,38.9449238620001,38.9419213140001,38.9387008850001,38.9362324800001,38.9328676710001,38.9272129240001,38.9241360140001,38.919972251,38.9203199190001,38.9183159500001,38.915907679,38.9134871680001,38.913887914,38.911057805,38.902996891,38.898259614,38.8886203060001,38.883927467,38.881158903,38.876326991,38.877623127,38.875177035,38.871468077,38.8689021180001,38.865918073,38.8635605000001,38.856974936,38.8481728780001,38.844469765,38.841337766,38.832680732,38.8315371620001,38.823956643,38.823024322,38.8194273120001,38.8158911630001,38.813199813,38.811251042,38.8096408390001,38.8061068120001,38.805308913,38.802609977,38.799078164,38.7983912020001,38.794735147,38.786807304,38.780631672,38.7814631360001,38.7781002300001,38.782777713,38.7809996130001,38.7856825100001,38.785305029,38.7716407360001,38.766505334,38.762041251,38.7563976550001,38.751032385,38.7495625820001,38.7486446300001,38.747189174,38.7442315820001,38.735326424,38.736638623,38.7339508680001,38.734331952,38.7384429090001,38.7384101390001,38.7417588340001,38.7450386520001,38.7410048310001,38.7416731700001,38.73805429]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addPolygons","args":[[[[{"lng":[-104.798099704087,-104.797047302127,-104.794854700565,-104.793655902147,-104.791901901364,-104.788188703358,-104.787165604532,-104.786405906081,-104.785442605615,-104.785122603178,-104.783047907054,-104.782463900745,-104.781675703824,-104.781063504517,-104.780977100134,-104.78077340126,-104.780775301158,-104.780982002616,-104.781013004482,-104.780896499753,-104.779875002801,-104.779612503946,-104.779614202678],"lat":[38.8043514937162,38.8036869987845,38.8026097938418,38.802105396986,38.8011656999588,38.7997896969318,38.7992396950722,38.798575296998,38.7970180958509,38.7957130968571,38.7940863966942,38.7933991998434,38.7921395972371,38.7906970977783,38.7896669954062,38.7888885959983,38.7874465957284,38.7859129980206,38.7846312001348,38.7842877954245,38.7827074974775,38.7820663973689,38.7808303982019]}]],[[{"lng":[-104.801052600145,-104.800205104053,-104.799795806408,-104.798099704087],"lat":[38.8058410957456,38.8051081970334,38.8048790991306,38.8043514937162]}]],[[{"lng":[-104.810787402093,-104.810729302466,-104.809852406383,-104.808507502079,-104.807513102889,-104.805816501379,-104.803710706532,-104.802891902626,-104.802424199879,-104.801636703312,-104.801052600145],"lat":[38.8130570948124,38.8127593994141,38.8118891939521,38.8109727948904,38.8105831965804,38.8103991001844,38.8098713979125,38.8095733970404,38.8091381937265,38.806871496141,38.8058410957456]}]],[[{"lng":[-104.817221604288,-104.816607303917,-104.815057203174,-104.813477702439,-104.813010007143,-104.811810903251,-104.810933500528,-104.810787402093],"lat":[38.8156925961375,38.8155549988151,38.8149590939283,38.814614996314,38.8141110986471,38.8137900978327,38.8133088946342,38.8130570948124]}]],[[{"lng":[-104.822692401707,-104.821931600571,-104.82152210176,-104.819064602256,-104.817221604288],"lat":[38.8161070942879,38.8162212967873,38.8161293938756,38.815990999341,38.8156925961375]}]],[[{"lng":[-104.829128205776,-104.827899605036,-104.827578000724,-104.827109903097,-104.825734704733,-104.824740201235,-104.82403820008,-104.822692401707],"lat":[38.8172998949885,38.8167500942945,38.8165439963341,38.8164521977305,38.8165432959795,38.8162223994732,38.8161076977849,38.8161070942879]}]],[[{"lng":[-104.831614203751,-104.830941401422,-104.830151706934,-104.829303503036,-104.829157300293,-104.829128205776],"lat":[38.8188801929355,38.8186739981174,38.8179869949818,38.8176890984178,38.8175516948104,38.8172998949885]}]],[[{"lng":[-104.832608401775,-104.831614203751],"lat":[38.8197731971741,38.8188801929355]}]],[[{"lng":[-104.833778105676,-104.833163700998,-104.832812801003,-104.832637406886,-104.832608401775],"lat":[38.8209409937263,38.8208033964038,38.8204829990864,38.8201394975185,38.8197731971741]}]],[[{"lng":[-104.835035599768,-104.834304399788,-104.833778105676],"lat":[38.8219942972064,38.821490496397,38.8209409937263]}]],[[{"lng":[-104.833656907082,-104.833570100367,-104.83368730545,-104.834682799876,-104.835063703358,-104.835093706846,-104.835035599768],"lat":[38.8281513974071,38.8265948966146,38.8262285962701,38.8249927982688,38.8241002932191,38.822795599699,38.8219942972064]}]],[[{"lng":[-104.870965003967,-104.870379701257,-104.869911402464,-104.86982370168,-104.869413904846,-104.869033306837,-104.8679504022,-104.867569901049,-104.867160201073,-104.865316405892,-104.864467702806,-104.863121502101,-104.86113139987,-104.860077805817,-104.858702406287,-104.858175702393,-104.857444100082,-104.857122406363,-104.856771200895,-104.856478706002,-104.855922706425,-104.854050002992,-104.849690102041,-104.846969000995,-104.846003502607,-104.844482004642,-104.84342880547,-104.842083103955,-104.840562202036,-104.840269602835,-104.839508801699,-104.838396802545,-104.837811701,-104.836553402245,-104.834183506668,-104.833656907082],"lat":[38.8517116978765,38.8511393964291,38.8504297956824,38.8498804941773,38.8492166996002,38.8489419966936,38.8485298976302,38.8482322990894,38.8476371988654,38.8461262956262,38.8452335968614,38.8442720994353,38.8434707000852,38.8427838981152,38.8416849970818,38.8413872942328,38.8407463952899,38.8402427956462,38.8393041938543,38.8389378935099,38.8385028988123,38.8373809978366,38.835297293961,38.8337631002069,38.8336025997996,38.832823894918,38.8321828991175,38.8311067000031,38.829572699964,38.8294580951333,38.829343393445,38.8293430954218,38.8292283937335,38.829296797514,38.8284719958901,38.8281513974071]}]],[[{"lng":[-104.884840600193,-104.883025601506,-104.881532602012,-104.878253906965,-104.876995205879,-104.875531502068,-104.874536305666,-104.87198960036,-104.870965003967],"lat":[38.8563119992614,38.8562434986234,38.8559231981635,38.8549390956759,38.854893296957,38.8544126972556,38.8540921956301,38.8521465957165,38.8517116978765]}]],[[{"lng":[-104.895350903273,-104.895292304456,-104.893975004554,-104.892657503486,-104.892101205885,-104.891047306359,-104.890286006033,-104.888266004622,-104.887036405504,-104.886509403586,-104.885777406394,-104.884840600193],"lat":[38.8593090996146,38.8593777939677,38.8594237938523,38.8591950982809,38.8589891940355,38.8584399968386,38.8581425994635,38.8577078953385,38.8572044968605,38.8568612933159,38.8565179929137,38.8563119992614]}]],[[{"lng":[-104.897077806294,-104.895526506007,-104.895350903273],"lat":[38.8585075959563,38.8593089953065,38.8593090996146]}]],[[{"lng":[-104.917658306658,-104.916838303208,-104.916135601699,-104.915725402534,-104.915022701025,-104.914612799883,-104.913500607014,-104.912622407079,-104.911100201309,-104.909050904214,-104.906562507153,-104.903371803463,-104.902903400362,-104.901556506753,-104.89959499985,-104.898980304599,-104.898277804255,-104.897165603936,-104.897077806294],"lat":[38.8593942970037,38.8587993979454,38.8585021942854,38.8581588938832,38.857838794589,38.8578159958124,38.8579765930772,38.8582514971495,38.8582978993654,38.8581153973937,38.8581161946058,38.8583000972867,38.8582314997911,38.8577969968319,38.8574769943953,38.8575457930565,38.8577747941017,38.8583701997995,38.8585075959563]}]],[[{"lng":[-104.91912240535,-104.918946802616,-104.917658306658],"lat":[38.8598285987973,38.8598286956549,38.8593942970037]}]],[[{"lng":[-104.931987702847,-104.930406101048,-104.929732300341,-104.929410099983,-104.929351404309,-104.929233603179,-104.928618103266,-104.928588606417,-104.928705602884,-104.928734600544,-104.928617306054,-104.927006103098,-104.925600104034,-104.924955606461,-104.924691706896,-104.924515202641,-104.923694603145,-104.922873906791,-104.921906806529,-104.921789102256,-104.921056300402,-104.920119002461,-104.919503301382,-104.919151701033,-104.91912240535],"lat":[38.8762579932809,38.8758695945144,38.8754807934165,38.8751833960414,38.8749773949385,38.8744281977415,38.8735357001424,38.8733067959547,38.8730549961329,38.8726658970118,38.8724826946855,38.8713389933109,38.8706299960613,38.870035097003,38.8695774972439,38.8685246929526,38.8673574998975,38.8659615963697,38.8645428940654,38.8638561964035,38.8626203984022,38.8617508932948,38.8603549972177,38.8599888980389,38.8598285987973]}]],[[{"lng":[-104.962368406355,-104.960260905325,-104.959821604192,-104.958738200366,-104.958181403577,-104.957214400172,-104.955954000354,-104.955250702798,-104.954665005207,-104.95352230221,-104.953053206205,-104.951821103692,-104.951058804989,-104.95050150156,-104.949972599745,-104.949444904923,-104.948155805469,-104.946544706821,-104.94531340152,-104.944229707122,-104.943409703672,-104.941565200686,-104.940862305462,-104.939690105617,-104.937845006585,-104.937405399978,-104.936731301248,-104.936438307166,-104.935618400574,-104.934857301414,-104.933803200722,-104.932075500488,-104.931987702847],"lat":[38.8885766938329,38.8894480988383,38.8895628973842,38.8896322995424,38.8894724994898,38.8890382945538,38.8880777955055,38.8877806961536,38.8876666948199,38.8872095942497,38.8867750987411,38.8849445953965,38.8841896951199,38.883251696825,38.8816038966179,38.8810318931937,38.88043769449,38.8799808993936,38.8787684962153,38.8784486949444,38.8784262984991,38.8786790966988,38.8785193935037,38.8776958957314,38.8772392943501,38.876941896975,38.8762554973364,38.8761182948947,38.8760729953647,38.8763022944331,38.8763257935643,38.876166395843,38.8762579932809]}]],[[{"lng":[-104.971546001732,-104.970840901136,-104.970459602773,-104.969580702484,-104.968790203333,-104.968233801425,-104.967999406159,-104.967324800789,-104.96709010005,-104.967089407146,-104.967264704406,-104.967234499753,-104.967087700963,-104.965943902731,-104.964800700545,-104.964624606073,-104.964272804558,-104.963423006237,-104.962368406355],"lat":[38.8962375968695,38.8947730958462,38.8944071978331,38.8942018970847,38.8945001959801,38.8945693001151,38.8944550976157,38.8937688991427,38.893402799964,38.8928991928697,38.89255579561,38.8918461948633,38.8915716931224,38.8904736936092,38.8896963968873,38.8894218951464,38.8891473934054,38.8887360990047,38.8885766938329]}]],[[{"lng":[-104.984965205193,-104.984935700893,-104.983820900321,-104.983380705118,-104.982383400202,-104.981621205807,-104.981415905058,-104.981210306287,-104.979508802295,-104.97865780443,-104.977367505431,-104.975871905684,-104.975022003055,-104.974845603108,-104.974493503571,-104.974317200482,-104.973760202527,-104.973408006132,-104.97314350307,-104.971823103726,-104.970972500741,-104.970971301198,-104.971234202385,-104.971262507141,-104.97137940675,-104.97199370712,-104.972255304456,-104.972577005625,-104.972634106874,-104.972428105772,-104.971635304391,-104.971546001732],"lat":[38.9176278933883,38.9175134971738,38.9166217967868,38.9161415994167,38.9153641983867,38.9151130989194,38.9149759933352,38.9146098941565,38.9131464958191,38.9121857956052,38.9113858938217,38.910334199667,38.910106100142,38.9096483960748,38.9093282967806,38.9090079963207,38.9086420983076,38.9082074984908,38.9075897932053,38.9060343950987,38.9053024947643,38.9043640941381,38.9038373976946,38.903127796948,38.9029215946794,38.9023946970701,38.9008607938886,38.900494299829,38.8994182944298,38.8987318947911,38.8972904980183,38.8962375968695]}]],[[{"lng":[-104.993584506214,-104.992587402463,-104.990036800504,-104.98930440098,-104.988952703774,-104.988219305873,-104.986255303025,-104.984965205193],"lat":[38.9208469986916,38.9202986955643,38.9194083958864,38.9194778949022,38.919363796711,38.918769299984,38.918176099658,38.9176278933883]}]],[[{"lng":[-104.999068006873,-104.998305305839,-104.997454605997,-104.996780201793,-104.995871700346,-104.995812900364,-104.993584506214],"lat":[38.9232904985547,38.9227647930384,38.9222392961383,38.9219652935863,38.9218060001731,38.9217145964503,38.9208469986916]}]],[[{"lng":[-105.000536300242,-104.999068006873],"lat":[38.9238153994083,38.9232904985547]}]],[[{"lng":[-105.01186530292,-105.011220902205,-105.009786300361,-105.009611099958,-105.008792303503,-105.007914200425,-105.006860405207,-105.006216004491,-105.004957102239,-105.004488900304,-105.003962904215,-105.002558402717,-105.000536300242],"lat":[38.9323878958821,38.9322041943669,38.9312641993165,38.9308977946639,38.929844096303,38.9290877953172,38.9283999949694,38.92819339782,38.9275511950254,38.9271157979965,38.9262681975961,38.9250535964966,38.9238153994083]}]],[[{"lng":[-105.01525850594,-105.01473210007,-105.012713201344,-105.0124502033,-105.011952906847,-105.01186530292],"lat":[38.936488494277,38.9357326999307,38.933579094708,38.93312099576,38.9325939938426,38.9323878958821]}]],[[{"lng":[-105.025646604598,-105.025383204222,-105.024679906666,-105.023830600083,-105.023215703666,-105.02298130095,-105.022454306483,-105.022015504539,-105.020962305367,-105.019352003932,-105.019088603556,-105.017156504095,-105.016543000937,-105.015606403351,-105.015226006508,-105.014963306487,-105.01525850594],"lat":[38.9482862949371,38.9480342939496,38.9477818980813,38.9473003968596,38.946842096746,38.9467731937766,38.9464065954089,38.9457193985581,38.9443221986294,38.9431533962488,38.9427410960197,38.9412285983562,38.9398316964507,38.9390753954649,38.9386400952935,38.9379074946046,38.936488494277]}]],[[{"lng":[-105.026289105415,-105.026144400239,-105.025939501822,-105.025646604598],"lat":[38.950049392879,38.9486987963319,38.9484238997102,38.9482862949371]}]],[[{"lng":[-105.028248801827,-105.02786860615,-105.026960901916,-105.02655120194,-105.026317603886,-105.026289105415],"lat":[38.9532555937767,38.9526372998953,38.9519039988518,38.9513313993812,38.9506445974112,38.950049392879]}]],[[{"lng":[-105.04050860554,-105.040450401604,-105.04012850672,-105.039720103145,-105.03907610476,-105.036996006966,-105.036966904998,-105.035590104759,-105.033949904144,-105.033598802984,-105.032720305026,-105.032574303448,-105.031842403114,-105.031052902341,-105.030877001584,-105.030789405107,-105.030584506691,-105.030496805906,-105.02947320044,-105.02923990041,-105.029213503003,-105.029067702591,-105.028628900647,-105.028365604579,-105.028248801827],"lat":[38.9732481986284,38.972836099565,38.9721949994564,38.9703634977341,38.969493098557,38.9680494964123,38.9679578989744,38.9669497981668,38.9654605984688,38.9649796932936,38.9640862941742,38.9636511951685,38.9627807959914,38.9612236991525,38.9611089974642,38.9608571976423,38.9606738984585,38.9604448974133,38.9585670977831,38.9576283991337,38.955293700099,38.9547440931201,38.9540341943502,38.9535990953445,38.9532555937767]}]],[[{"lng":[-105.041533403099,-105.041533403099,-105.040772207081,-105.04050860554],"lat":[38.9745535999537,38.9743933975697,38.9733856990933,38.9732481986284]}]],[[{"lng":[-105.04282130301,-105.042613506317,-105.042113102973,-105.04206430167,-105.041889503598,-105.041714705527,-105.041533403099],"lat":[38.9765002951026,38.976411499083,38.9760839939117,38.9759481996298,38.9754621982574,38.9749761968851,38.9745535999537]}]],[[{"lng":[-105.032620705664,-105.033266201615,-105.033941403031,-105.034323401749,-105.034970700741,-105.035735100508,-105.036762706935,-105.037760600448,-105.038699500263,-105.039345100522,-105.039902605116,-105.040665604174,-105.041575700045,-105.04342520237,-105.044688403606,-105.045187406242,-105.046272903681,-105.046977303922,-105.047212406993,-105.047214105725,-105.046716503799,-105.044929303229,-105.044724404812,-105.044578306377,-105.04428550601,-105.043787203729,-105.043464906514,-105.04282130301],"lat":[38.9967729970813,38.9965675994754,38.9961101934314,38.9955154955387,38.9939135983586,38.992449298501,38.9915114939213,38.9909857958555,38.9906203001738,38.9902774989605,38.9900946989655,38.9896833002567,38.9890200942755,38.9872817993164,38.9854285940528,38.9850397929549,38.9846743941307,38.9841024950147,38.9837135002017,38.9819738939404,38.9811266958714,38.979591794312,38.9792711958289,38.9787445962429,38.978446893394,38.9782404974103,38.9779883995652,38.9765002951026]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"clearGroup","args":["shp"]},{"method":"addPolygons","args":[[[[{"lng":[-105.028903,-105.033544,-104.662896,-104.051568,-104.055528,-104.053921,-104.941533,-104.942426,-104.938994,-105.072184,-105.028903],"lat":[38.868907,39.129819,39.129527,39.128138,38.868868,38.522393,38.519569,38.649882,38.796884,38.799382,38.868907]}]]],null,"shp",{"interactive":true,"className":"","stroke":true,"color":"#003660","weight":5,"opacity":0.5,"fill":true,"fillColor":"#FEBC11","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[38.519569,39.138682353],"lng":[-105.126046285,-104.051568]},"flyToBounds":[38.519569,-105.072184,39.129819,-104.051568,[]]},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="where-are-we-going" class="section level1">
<h1>Where are we going?</h1>
<p>We will use <a href="https://rmarkdown.rstudio.com/flexdashboard/">flexdashboard</a> to generate the app.</p>
<p>If you know Rmarkdown basics, this will be intuitive for you!</p>
<p>The key new piece is that:</p>
<ul>
<li>Each Level 1 Header (#) begins a new page in the dashboard.</li>
<li>Each Level 2 Header (##) begins a new column/row.</li>
<li>Each Level 3 Header (###) begins a new box.</li>
</ul>
<p>The app material can be found <a href="https://github.com/mikejohnson51/leaflet-intro/tree/master/shiny">here</a></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
